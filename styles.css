/* ─────────────── RESET & TOKENS ─────────────── */
@layer reset, tokens, base, layout, components, utilities, overrides;

@layer reset {
  *,*::before,*::after{box-sizing:border-box;margin:0;padding:0}
}

@layer tokens {
  :root {
    /* — Tipografía & medidas — */
    --ff-base: 'Inter', system-ui, sans-serif;
    --fs-base: 1rem;
    --radius: 0.5rem;
    --radius-full: 50%;
    --transition: 0.25s ease;

    /* — Sombras — */
    --shadow-xs: 0 1px 2px rgba(0 0 0 / .05);
    --shadow-sm: 0 1px 3px rgba(0 0 0 / .08), 0 1px 2px rgba(0 0 0 / .04);
    --shadow-md: 0 4px 6px rgba(0 0 0 / .04), 0 2px 4px rgba(0 0 0 / .08);

    /* — Paleta global — */
    --bg: #f8f9fa;
    --card: #fff;
    --border: #dee2e6;
    --text: #212529;
    --text-sub: #6c757d;

    /* — Éxito / casos generales — */
    --success: #198754;
    --success-bg: #e8f3ee;

    /* — Paletas por día — */
    --viernes:  #0d6efd;   --viernes-50:  #e7f0ff; --viernes-70:#7ab1ff;
    --sabado:   #fd7e14;   --sabado-50:   #fff3e8; --sabado-70:#fdb47d;
    --domingo:  #6f42c1;   --domingo-50:  #f1ebf9; --domingo-70:#ab8edb;
  }

  @media (prefers-color-scheme: dark) {
    :root {
      --bg:#1f1f1f; --card:#2a2a2a; --border:#3a3a3a;
      --text:#f1f3f4; --text-sub:#adb5bd;
    }
  }
}

/* ─────────────── BASE ─────────────── */
@layer base {
  body{
    font:var(--fs-base)/1.5 var(--ff-base);
    background:var(--bg);
    color:var(--text);
    padding:1rem;
    -webkit-font-smoothing:antialiased;
    transition:background var(--transition);
  }
  img,svg{display:block;max-width:100%}
  button{font:inherit}
  :focus-visible{outline:2px solid var(--viernes);outline-offset:2px}
}

/* ─────────────── LAYOUT ─────────────── */
@layer layout {
  header{ text-align:center;margin-block:0 1.5rem;position:relative }
  main{ max-width:800px;margin-inline:auto }
  
  #day-nav{
    display:flex;gap:.25rem;
    justify-content:center;
    padding:.5rem;
    background:var(--card);
    border-radius:var(--radius);
    box-shadow:var(--shadow-sm);
  }
  
  #summary-panel{
    display:flex;flex-wrap:wrap;gap:1.5rem;
    justify-content:center;
    margin-block:0 2rem;padding:1rem;
    background:var(--card);border-radius:var(--radius);
    box-shadow:var(--shadow-sm);
  }

  @container (max-width:480px){
    #summary-panel .count{font-size:1.6em}
  }
}

/* ─────────────── COMPONENTS ─────────────── */
@layer components {
  /* — Botones de navegación día — */
  .nav-button{
    flex:1;display:flex;align-items:center;justify-content:center;gap:.5rem;
    padding:.75rem 1rem;
    background:none;border:none;border-radius:var(--radius);
    color:var(--text-sub);font-weight:600;cursor:pointer;
    transition:background var(--transition),color var(--transition);
  }
  .day-viernes   .nav-button.active[data-day="Viernes"] {background:var(--viernes);color:#fff}
  .day-sabado    .nav-button.active[data-day="Sábado"]  {background:var(--sabado);color:#fff}
  .day-domingo   .nav-button.active[data-day="Domingo"] {background:var(--domingo);color:#fff}

  /* — Tarjeta login — */
  .login-container{
    width:min(90%,400px);padding:2rem 2.5rem;
    background:var(--card);border-radius:var(--radius);
    box-shadow:var(--shadow-md);text-align:center;
  }
  
  /* Inputs y botones */
  input,button{
    width:100%;padding:.75rem;border-radius:var(--radius);
    border:1px solid var(--border);box-sizing:border-box;
  }
  button{
    font-weight:700;color:#fff;background:var(--viernes);
    border:none;cursor:pointer;transition:background var(--transition)
  }
  button:hover{background:#0b5ed7}
  button:disabled{opacity:.5;cursor:not-allowed}

  /* — Accordión participante — */
  .participant-accordion{
    border:1px solid var(--border);border-radius:var(--radius);
    overflow:hidden;box-shadow:var(--shadow-xs);
    --p:0%; /* <- valor programado vía JS */
    background:linear-gradient(
      90deg,
      var(--day-color-progress) var(--p),
      var(--day-color-bg-light) var(--p)
    );transition:background var(--transition),border-color var(--transition)
  }
  .participant-accordion:hover{border-color:var(--day-color-primary)}
  .participant-accordion.is-complete{
    background:var(--success-bg);border-color:var(--success)
  }

  .accordion-header{display:flex;align-items:center;width:100%;
    padding:.75rem 1rem;background:none;border:none;cursor:pointer}
  .accordion-icon{transition:transform var(--transition)}
  .accordion-header.active .accordion-icon{transform:rotate(180deg)}
  
  .accordion-content{max-height:0;overflow:hidden;transition:max-height .4s ease}
  .accordion-content.active{max-height:500px}
  
  .checklist-item{
    display:flex;align-items:center;gap:1rem;
    padding:.9rem .5rem;border-bottom:1px solid #f1f3f4;
    transition:opacity var(--transition)
  }
  .checklist-item.disabled{opacity:.5;pointer-events:none;background:#f8f9fa}
  
  /* Indicadores circulares (usamos data-attr para no multiplicar clases) */
  .indicator{--c:#ced4da;width:10px;height:10px;border-radius:50%;background:var(--c);
    box-shadow:inset 0 0 2px rgb(0 0 0 / .1);transition:background var(--transition)}
  .indicator[data-type="recogida"]        {--c:#ffc107}
  .indicator[data-type="orientacion"]     {--c:#007bff}
  .indicator[data-type="detras"]          {--c:#fd7e14}
  .indicator[data-type="discursado"]      {--c:#6f42c1}
  .indicator[data-type="maq-sí"]          {--c:#ea4335}
  .indicator[data-type="maq-no"]          {--c:var(--text)}
  .indicator[data-type="maq-na"]          {--c:#80868b}
}

/* ─────────────── UTILITIES ─────────────── */
@layer utilities {
  .hidden{display:none!important}
  .count{font-size:1.8em;font-weight:700}
  .label{font-size:.9em;font-weight:500;color:var(--text-sub)}
  .rounded-full{border-radius:var(--radius-full)}
  .shadow-sm{box-shadow:var(--shadow-sm)}
  .text-center{text-align:center}
}

/* ─────────────── OVERRIDES POR DÍA ─────────────── */
@layer overrides {
  /* Color tokens se inyectan vía JS al <body class="day-viernes"> …*/
  .day-viernes{
    --day-color-primary:var(--viernes);
    --day-color-progress:var(--viernes-70);
    --day-color-bg-light:var(--viernes-50);
  }
  .day-sabado{
    --day-color-primary:var(--sabado);
    --day-color-progress:var(--sabado-70);
    --day-color-bg-light:var(--sabado-50);
  }
  .day-domingo{
    --day-color-primary:var(--domingo);
    --day-color-progress:var(--domingo-70);
    --day-color-bg-light:var(--domingo-50);
  }

  /* Texto numérico de resumen coloreado por tema (usa .count util) */
  .day-viernes  .count{color:var(--viernes)}
  .day-sabado   .count{color:var(--sabado)}
  .day-domingo  .count{color:var(--domingo)}
}

/* ─────────────── MINI QUERIES EXTRA ─────────────── */
@media (max-width:480px){
  #logout-button{
    position:static;margin:.5rem auto;width:auto;
    display:block;border-radius:var(--radius);
    padding:.5rem 1rem
  }
}